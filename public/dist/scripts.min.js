var app = angular.module('UPayApp', ['firebase','ui.bootstrap']);


(function() {
 //     var myFirebaseRef = new Firebase("https://dazzling-torch-7927.firebaseio.com/");

 //    myFirebaseRef.child("rest/uusi").on("value", function(snapshot) {
  		
	// });

	//  var usersRef = myFirebaseRef.child("rest/project1");
 //    usersRef.push().set({
 //      reissu: {
 //        payer: "Jouni",
 //        summa: 15
 //      }
 //    }, function(error){
 //    	  if (error) {
 //    alert("Data could not be saved." + error);
 //  } else {
 //    alert("Tiedot tallennettu. Avain: " + usersRef.key());
 //  }
 //    });
 //    console.log(usersRef.key()); 
})();
	    

   // var myFirebaseRef = new Firebase("https://dazzling-torch-7927.firebaseio.com/");

 //    myFirebaseRef.child("rest/uusi").on("value", function(snapshot) {
 //  		alert(snapshot.val());  // Alerts "San Francisco"
	// });


// 18 - 19 Angular boilerplaten forkkaus ja gulp-opettelu
// la 31. gulp-video
// Angular firebase 10 - 13



 
(function(){
	app.factory("paymentList", ["$firebaseArray",
  		function($firebaseArray) {
    	// create a reference to the database location where we will store our data
    		var ref = new Firebase("https://dazzling-torch-7927.firebaseio.com/rest/project1/payments");

   			 // this uses AngularFire to create the synchronized array
    		return $firebaseArray(ref);
  		}
]);

	app.controller("PersonListController", ["$scope", "paymentList",
  		// we pass our new chatMessages factory into the controller
  		function($scope, paymentList) {
	   		// we add chatMessages array to the scope to be used in our ng-repeat
    		$scope.payments = paymentList;

    		// a method to create new messages; called by ng-submit
    		$scope.addPayment = function() {
    		// calling $add on a synchronized array is like Array.push(),
			// except that it saves the changes to our database!
      			$scope.payments.$add({
      				//createdDate: Firebase.ServerValue.TIMESTAMP,
      				sum: $scope.sum,
      				person: $scope.person,
      				description: $scope.description,

        		});
      		// reset the message input
      			$scope.payment = "";

    		};
   		}]);
})();


(function(){

	 app.factory("personList", ["$firebaseArray",
  		function($firebaseArray) {
    	// create a reference to the database location where we will store our data
    		var ref = new Firebase("https://dazzling-torch-7927.firebaseio.com/rest/project1/persons");

   			 // this uses AngularFire to create the synchronized array
    		return $firebaseArray(ref);
  		}
]);

	app.controller("PersonListController", ["$scope", "personList",
  		// we pass our new chatMessages factory into the controller
  		function($scope, personList) {
	   		// we add chatMessages array to the scope to be used in our ng-repeat
    		$scope.persons = personList;

    		// a method to create new messages; called by ng-submit
    		$scope.addPerson = function() {
    		// calling $add on a synchronized array is like Array.push(),
			// except that it saves the changes to our database!
      			$scope.persons.$add({
      				name: $scope.person
        		});
      		// reset the message input
      			$scope.person = "";

    		};
   		}]);
    })();

 //    usersRef.push().set({
 //      reissu: {
 //        payer: "Jouni",
 //        summa: 15
 //      }
 //    }, function(error){
 //    	  if (error) {
 //    alert("Data could not be saved." + error);
 //  } else {
 //    alert("Tiedot tallennettu. Avain: " + usersRef.key());
 //  }
 //    });
 //    console.log(usersRef.key()); 
 /*
ref.on("value", function(snapshot) {
  console.log(snapshot.val());
}, function (errorObject) {
  console.log("The read failed: " + errorObject.code);
});
 */


  // function PersonListController($scope){
    


  //   $scope.addPerson = function(){
  //   myFirebaseRef.push().set({
  //       name: $scope.newPerson
  //   }, function(error){
  //   	  if (error) {
  //   alert("Data could not be saved." + error);
  // } else {
  //   alert("Tiedot tallennettu. Avain: " + myFirebaseRef.key());
  // }
  //   });
  //     $scope.persons.push(
  //     	{name:$scope.newPerson,
  //     	 });
  //     $scope.newPerson = '';
  //   }
  // }

//project-controller
(function(){
  angular.module('UPayApp')
    .controller('ProjectController', ['$scope', ProjectController])

  function ProjectController($scope){
  	$scope.project = { name: 'Uusi'};
    $scope.addNewProject = function(){
      $scope.project = { name: $scope.newProject}; 
      $scope.newProject = '';
      console.log(this.project);
    }
  }
})();
(function(){
  angular.module('UPayApp')
    .controller('TodoListController', ['$scope', TodoListController])

  function TodoListController($scope){
    $scope.todos = ['Learn Angular', 'Learn Node.js', 'Drink beer'];

    $scope.addTodo = function(){
      $scope.todos.push($scope.newTodo);
      $scope.newTodo = '';
    }
  }
})();
